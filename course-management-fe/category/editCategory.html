<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta charset="utf-8" />
    <title>Edit Category</title>

    <meta name="description" content="3 styles with inline editable feature" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">
    <!-- bootstrap & fontawesome -->
    <link rel="stylesheet" href="/assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/assets/font-awesome/4.5.0/css/font-awesome.min.css" />

    <!-- page specific plugin styles -->
    <link rel="stylesheet" href="/assets/css/jquery-ui.custom.min.css" />
    <link rel="stylesheet" href="/assets/css/jquery.gritter.min.css" />
    <link rel="stylesheet" href="/assets/css/select2.min.css" />
    <link rel="stylesheet" href="/assets/css/bootstrap-datepicker3.min.css" />
    <link rel="stylesheet" href="/assets/css/bootstrap-editable.min.css" />
    <link rel="stylesheet" href="/assets/css/dropzone.min.css" />

    <!-- text fonts -->
    <link rel="stylesheet" href="/assets/css/fonts.googleapis.com.css" />

    <!-- ace styles -->
    <link rel="stylesheet" href="/assets/css/ace.min.css" class="ace-main-stylesheet" id="main-ace-style" />

    <!--[if lte IE 9]>
			<link rel="stylesheet" href="assets/css/ace-part2.min.css" class="ace-main-stylesheet" />
		<![endif]-->
    <link rel="stylesheet" href="/assets/css/ace-skins.min.css" />
    <link rel="stylesheet" href="/assets/css/ace-rtl.min.css" />

    <!--[if lte IE 9]>
		  <link rel="stylesheet" href="assets/css/ace-ie.min.css" />
		<![endif]-->

    <!-- inline styles related to this page -->

    <!-- ace settings handler -->
    <script src="/assets/js/ace-extra.min.js"></script>

    <!-- HTML5shiv and Respond.js for IE8 to support HTML5 elements and media queries -->

    <!--[if lte IE 8]>
		<script src="assets/js/html5shiv.min.js"></script>
		<script src="assets/js/respond.min.js"></script>
		<![endif]-->
</head>

<body class="no-skin">
    <div id="navbar" class="navbar navbar-default          ace-save-state">
        <div class="navbar-container ace-save-state" id="navbar-container">
            <button type="button" class="navbar-toggle menu-toggler pull-left" id="menu-toggler" data-target="#sidebar">
					<span class="sr-only">Toggle sidebar</span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>

					<span class="icon-bar"></span>
				</button>

            <div class="navbar-header pull-left">
                <a href="/index.html" class="navbar-brand">
                    <small>
							<i class="fa fa-leaf"></i>
							CMS
						</small>
                </a>
            </div>

            <div class="navbar-buttons navbar-header pull-right" role="navigation">
                <ul class="nav ace-nav">
                    <li class="light-blue dropdown-modal">
                        <a data-toggle="dropdown" href="#" class="dropdown-toggle">
                            <img class="nav-user-photo" src="/assets/images/avatars/user.jpg" alt="Jason's Photo" />
                            <span class="user-info">
									<small>Welcome,</small>
									<div id ="usernames"></div>
								</span>

                            <i class="ace-icon fa fa-caret-down"></i>
                        </a>

                        <ul class="user-menu dropdown-menu-right dropdown-menu dropdown-yellow dropdown-caret dropdown-close">
                            <li>
                                <a href="/account/proFile.html">
                                    <i class="ace-icon fa fa-user"></i> Profile
                                </a>
                            </li>

                            <li class="divider"></li>

                            <li>
                                <a href="#" onclick="removeToken()">
                                    <i class="ace-icon fa fa-power-off"></i> Logout
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <!-- /.navbar-container -->
    </div>

    <div class="main-container ace-save-state" id="main-container">
        <script type="text/javascript">
            try {
                ace.settings.loadState('main-container')
            } catch (e) {}
        </script>

        <div id="sidebar" class="sidebar responsive ace-save-state">
            <script type="text/javascript">
                try {
                    ace.settings.loadState("sidebar");
                } catch (e) {}
            </script>
            <ul class="nav nav-list">
                <li class="">
                    <a href="/index.html">
                        <i class="menu-icon fa fa-tachometer"></i>
                        <span class="menu-text"> Dashboard </span>
                    </a>
                </li>
                <li class="">
                    <a href="/category/listCategory.html">
                        <i class="menu-icon fa fa-list"></i>
                        <span class="menu-text"> Manage Category </span>
                    </a>
                </li>
                <li class="">
                    <a href="/topic/listTopic.html">
                        <i class="menu-icon fa fa-list"></i>
                        <span class="menu-text"> Manage Topic </span>
                    </a>
                </li>
                <li class="">
                    <a href="/course/course.html">
                        <i class="menu-icon fa fa-list"></i>
                        <span class="menu-text"> Manage Course </span>
                    </a>
                </li>
                <!-- <li class="">
            <a href="" class="dropdown-toggle">
                <i class="menu-icon fa fa-user"></i>
                <span class="menu-text"> User </span>

                <b class="arrow fa fa-angle-down"></b>
            </a>

            <b class="arrow"></b>

            <ul class="submenu">


                <li class="">
                    <a href="/account/listUser.html">
                        <i class="menu-icon fa fa-caret-right"></i> List User
                    </a>

                    <b class="arrow"></b>
                </li>



                <b class="arrow"></b>
        </li> -->
                <li class="">
                    <a href="/account/listUser.html">
                        <i class="menu-icon fa fa-user"></i>
                        <span class="menu-text"> Manage User </span>
                    </a>
                </li>
            </ul>
            </li>
            </ul>

            <div class="sidebar-toggle sidebar-collapse" id="sidebar-collapse">
                <i id="sidebar-toggle-icon" class="ace-icon fa fa-angle-double-left ace-save-state" data-icon1="ace-icon fa fa-angle-double-left" data-icon2="ace-icon fa fa-angle-double-right"></i>
            </div>
        </div>

        <div class="main-content">
            <div class="main-content-inner">
                <div class="breadcrumbs ace-save-state" id="breadcrumbs">
                    <ul class="breadcrumb">
                        <li>
                            <i class="ace-icon fa fa-home home-icon"></i>
                            <a href="../index.html">Home</a>
                        </li>

                        <li>
                            <a href="listCategory.html">Category</a>
                        </li>
                        <li class="active">Edit Category</li>
                    </ul>
                    <!-- /.breadcrumb -->
                </div>

                <div class="page-content">

                    <div class="page-header">
                        <h1>
                            Edit Category
                        </h1>
                    </div>
                    <!-- /.page-header -->

                    <!-- DropZone -->
                    <div class="form-body">
                        <!-- DropZone -->
                        <div class="row">
                            <div class="col-xs-12">
                                <!-- PAGE CONTENT BEGINS -->
                                <div class="col-md-6" style="border: 2px solid #ddd; margin-left : 50px;line-height: 20px;">
                                    <!--course name-->
                                    <div class="form-group">
                                        <label for="cname">Category name</label>
                                        <input type="text" required name="cname" id="cname" placeholder="Enter name" />
                                        <span id="cnameError" style="color: red;"></span>
                                    </div>
                                    <!--des-->
                                    <div class="form-group">
                                        <label for="desc">Description</label>
                                        <textarea name="" id="desc" cols="30" rows="10"></textarea>
                                    </div>
                                </div>
                                <div class="col-md-5" style="border: 2px solid #ddd; margin-left: 30px; min-height: 335px;">
                                    <label for="desc">Image</label>
                                    <div class="col-xs-12" style="border: 5px solid #ddd"><br>

                                        <div class="col-xs-12">
                                            <form action="./dummy.html" class="dropzone well" id="dropzone">
                                                <div class="fallback">
                                                    <input name="file" type="file" multiple="" id="image" />
                                                </div>
                                            </form>
                                        </div>
                                    </div>
                                    <div id="preview-template" class="hide">
                                        <div class="dz-preview dz-file-preview">
                                            <div class="dz-image">
                                                <img data-dz-thumbnail="" />
                                            </div>

                                            <div class="dz-details">
                                                <div class="dz-size">
                                                    <span data-dz-size=""></span>
                                                </div>

                                                <div class="dz-filename">
                                                    <span data-dz-name=""></span>
                                                </div>
                                            </div>

                                            <div class="dz-progress">
                                                <span class="dz-upload" data-dz-uploadprogress=""></span>
                                            </div>

                                            <div class="dz-error-message">
                                                <span data-dz-errormessage=""></span>
                                            </div>

                                            <div class="dz-success-mark">
                                                <span class="fa-stack fa-lg bigger-150">
                                            <i class="fa fa-circle fa-stack-2x white"></i>
                        
                                            <i class="fa fa-check fa-stack-1x fa-inverse green"></i>
                                          </span>
                                            </div>

                                            <div class="dz-error-mark">
                                                <span class="fa-stack fa-lg bigger-150">
                                            <i class="fa fa-circle fa-stack-2x white"></i>
                        
                                            <i class="fa fa-remove fa-stack-1x fa-inverse red"></i>
                                          </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                            <br />
                            <div class="form-footer" style="float: right; margin-right: 4%; margin-top: 10px;">
                                <a href="/category/listCategory.html">
                                    <button class="btn btn-white btn-default btn-round">
                        <i class="ace-icon fa fa-times red2"></i>
                        Cancel
                    </button>
                                </a>
                                <!-- <button class="btn btn-white btn-success btn-round">
                        <i class="ace-icon fa fa-check"></i>
                        Save & Add Another
                    </button> -->
                                <button onclick="editCategory()" class="btn btn-white btn-info btn-round">
                        <i class="ace-icon fa fa-floppy-o bigger-120 blue"></i>
                        Save
                    </button>
                            </div>
                            <!-- /.page-content -->
                        </div>

                        <!-- /.main-content -->

                        <div class="footer">
                            <div class="footer-inner">
                                <div class="footer-content">
                                    <span class="bigger-120">
							<span class="blue bolder">@</span> fptlearning
                                    </span>

                                    &nbsp; &nbsp;
                                    <span class="action-buttons">
							<a href="#">
								<i class="ace-icon fa fa-twitter-square light-blue bigger-150"></i>
							</a>

							<a href="#">
								<i class="ace-icon fa fa-facebook-square text-primary bigger-150"></i>
							</a>

							<a href="#">
								<i class="ace-icon fa fa-rss-square orange bigger-150"></i>
							</a>
						</span>
                                </div>
                            </div>
                        </div>

                        <a href="#" id="btn-scroll-up" class="btn-scroll-up btn btn-sm btn-inverse">
                            <i class="ace-icon fa fa-angle-double-up icon-only bigger-110"></i>
                        </a>
                    </div>
                    <!-- /.main-container -->

                    <!-- basic scripts -->

                    <!--[if !IE]> -->
                    <script src="/assets/js/jquery-2.1.4.min.js"></script>
                    <script src="/assets/js/dropzone.min.js"></script>
                    <!-- <![endif]-->

                    <!--DropZone using JS-->
                    <script type="text/javascript">
                        jQuery(function($) {
                            try {
                                Dropzone.autoDiscover = false;

                                var myDropzone = new Dropzone("#dropzone", {
                                    previewTemplate: $("#preview-template").html(),

                                    thumbnailHeight: 120,
                                    thumbnailWidth: 120,
                                    maxFilesize: 0.5,

                                    //addRemoveLinks : true,
                                    //dictRemoveFile: 'Remove',

                                    dictDefaultMessage: '<span class="bigger-150 bolder"><i class="ace-icon fa fa-caret-right red"></i> Drop files</span> to upload \
                          <span class="smaller-80 grey">(or click)</span> <br /> \
                          <i class="upload-icon ace-icon fa fa-cloud-upload blue fa-3x"></i>',
                                    thumbnail: function(file, dataUrl) {
                                        if (file.previewElement) {
                                            $(file.previewElement).removeClass("dz-file-preview");
                                            var images = $(file.previewElement)
                                                .find("[data-dz-thumbnail]")
                                                .each(function() {
                                                    var thumbnailElement = this;
                                                    thumbnailElement.alt = file.name;
                                                    thumbnailElement.src = dataUrl;
                                                });
                                            setTimeout(function() {
                                                $(file.previewElement).addClass("dz-image-preview");
                                            }, 1);
                                        }
                                    },
                                });

                                //simulating upload progress
                                var minSteps = 6,
                                    maxSteps = 60,
                                    timeBetweenSteps = 100,
                                    bytesPerStep = 100000;

                                myDropzone.uploadFiles = function(files) {
                                    var self = this;

                                    for (var i = 0; i < files.length; i++) {
                                        var file = files[i];
                                        totalSteps = Math.round(
                                            Math.min(maxSteps, Math.max(minSteps, file.size / bytesPerStep))
                                        );

                                        for (var step = 0; step < totalSteps; step++) {
                                            var duration = timeBetweenSteps * (step + 1);
                                            setTimeout(
                                                (function(file, totalSteps, step) {
                                                    return function() {
                                                        file.upload = {
                                                            progress: (100 * (step + 1)) / totalSteps,
                                                            total: file.size,
                                                            bytesSent: ((step + 1) * file.size) / totalSteps,
                                                        };

                                                        self.emit(
                                                            "uploadprogress",
                                                            file,
                                                            file.upload.progress,
                                                            file.upload.bytesSent
                                                        );
                                                        if (file.upload.progress == 100) {
                                                            file.status = Dropzone.SUCCESS;
                                                            self.emit("success", file, "success", null);
                                                            self.emit("complete", file);
                                                            self.processQueue();
                                                        }
                                                    };
                                                })(file, totalSteps, step),
                                                duration
                                            );
                                        }
                                    }
                                };

                                //remove dropzone instance when leaving this page in ajax mode
                                $(document).one("ajaxloadstart.page", function(e) {
                                    try {
                                        myDropzone.destroy();
                                    } catch (e) {}
                                });
                            } catch (e) {
                                alert("Dropzone.js does not support older browsers!");
                            }
                        });
                    </script>
                    <!--End of DropZone-->

                    <!--[if IE]>
        <script src="assets/js/jquery-1.11.3.min.js"></script>
        <![endif]-->
                    <script type="text/javascript">
                        if ('ontouchstart' in document.documentElement) document.write("<script src='/assets/js/jquery.mobile.custom.min.js'>" + "<" + "/script>");
                    </script>
                    <script src="/assets/js/bootstrap.min.js"></script>

                    <!-- page specific plugin scripts -->

                    <!--[if lte IE 8]>
		  <script src="assets/js/excanvas.min.js"></script>
		<![endif]-->
                    <script src="/assets/js/jquery-ui.custom.min.js"></script>
                    <script src="/assets/js/jquery.ui.touch-punch.min.js"></script>
                    <script src="/assets/js/jquery.gritter.min.js"></script>
                    <script src="/assets/js/bootbox.js"></script>
                    <script src="/assets/js/jquery.easypiechart.min.js"></script>
                    <script src="/assets/js/bootstrap-datepicker.min.js"></script>
                    <script src="/assets/js/jquery.hotkeys.index.min.js"></script>
                    <script src="/assets/js/bootstrap-wysiwyg.min.js"></script>
                    <script src="/assets/js/select2.min.js"></script>
                    <script src="/assets/js/spinbox.min.js"></script>
                    <script src="/assets/js/bootstrap-editable.min.js"></script>
                    <script src="/assets/js/ace-editable.min.js"></script>
                    <script src="/assets/js/jquery.maskedinput.min.js"></script>

                    <!-- ace scripts -->
                    <script src="/assets/js/ace-elements.min.js"></script>
                    <script src="/assets/js/ace.min.js"></script>

                    <!-- inline scripts related to this page -->

                    <script type="text/javascript">
                        jQuery(function($) {

                            //editables on first profile page
                            $.fn.editable.defaults.mode = 'inline';
                            $.fn.editableform.loading = "<div class='editableform-loading'><i class='ace-icon fa fa-spinner fa-spin fa-2x light-blue'></i></div>";
                            $.fn.editableform.buttons = '<button type="submit" class="btn btn-info editable-submit"><i class="ace-icon fa fa-check"></i></button>' +
                                '<button type="button" class="btn editable-cancel"><i class="ace-icon fa fa-times"></i></button>';

                            //editables 

                            //text editable
                            $('#username')
                                .editable({
                                    type: 'text',
                                    name: 'username'
                                });



                            //select2 editable
                            var countries = [];
                            $.each({
                                "CA": "Canada",
                                "IN": "India",
                                "NL": "Netherlands",
                                "TR": "Turkey",
                                "US": "United States"
                            }, function(k, v) {
                                countries.push({
                                    id: k,
                                    text: v
                                });
                            });

                            var cities = [];
                            cities["CA"] = [];
                            $.each(["Toronto", "Ottawa", "Calgary", "Vancouver"], function(k, v) {
                                cities["CA"].push({
                                    id: v,
                                    text: v
                                });
                            });
                            cities["IN"] = [];
                            $.each(["Delhi", "Mumbai", "Bangalore"], function(k, v) {
                                cities["IN"].push({
                                    id: v,
                                    text: v
                                });
                            });
                            cities["NL"] = [];
                            $.each(["Amsterdam", "Rotterdam", "The Hague"], function(k, v) {
                                cities["NL"].push({
                                    id: v,
                                    text: v
                                });
                            });
                            cities["TR"] = [];
                            $.each(["Ankara", "Istanbul", "Izmir"], function(k, v) {
                                cities["TR"].push({
                                    id: v,
                                    text: v
                                });
                            });
                            cities["US"] = [];
                            $.each(["New York", "Miami", "Los Angeles", "Chicago", "Wysconsin"], function(k, v) {
                                cities["US"].push({
                                    id: v,
                                    text: v
                                });
                            });

                            var currentValue = "NL";
                            $('#country').editable({
                                type: 'select2',
                                value: 'NL',
                                //onblur:'ignore',
                                source: countries,
                                select2: {
                                    'width': 140
                                },
                                success: function(response, newValue) {
                                    if (currentValue == newValue) return;
                                    currentValue = newValue;

                                    var new_source = (!newValue || newValue == "") ? [] : cities[newValue];

                                    //the destroy method is causing errors in x-editable v1.4.6+
                                    //it worked fine in v1.4.5
                                    /**			
                                    $('#city').editable('destroy').editable({
                                    	type: 'select2',
                                    	source: new_source
                                    }).editable('setValue', null);
                                    */

                                    //so we remove it altogether and create a new element
                                    var city = $('#city').removeAttr('id').get(0);
                                    $(city).clone().attr('id', 'city').text('Select City').editable({
                                        type: 'select2',
                                        value: null,
                                        //onblur:'ignore',
                                        source: new_source,
                                        select2: {
                                            'width': 140
                                        }
                                    }).insertAfter(city); //insert it after previous instance
                                    $(city).remove(); //remove previous instance

                                }
                            });

                            $('#city').editable({
                                type: 'select2',
                                value: 'Amsterdam',
                                //onblur:'ignore',
                                source: cities[currentValue],
                                select2: {
                                    'width': 140
                                }
                            });



                            //custom date editable
                            $('#signup').editable({
                                type: 'adate',
                                date: {
                                    //datepicker plugin options
                                    format: 'yyyy/mm/dd',
                                    viewformat: 'yyyy/mm/dd',
                                    weekStart: 1

                                    //,nativeUI: true//if true and browser support input[type=date], native browser control will be used
                                    //,format: 'yyyy-mm-dd',
                                    //viewformat: 'yyyy-mm-dd'
                                }
                            })

                            $('#age').editable({
                                type: 'spinner',
                                name: 'age',
                                spinner: {
                                    min: 16,
                                    max: 99,
                                    step: 1,
                                    on_sides: true
                                        //,nativeUI: true//if true and browser support input[type=number], native browser control will be used
                                }
                            });


                            $('#login').editable({
                                type: 'slider',
                                name: 'login',

                                slider: {
                                    min: 1,
                                    max: 50,
                                    width: 100
                                        //,nativeUI: true//if true and browser support input[type=range], native browser control will be used
                                },
                                success: function(response, newValue) {
                                    if (parseInt(newValue) == 1)
                                        $(this).html(newValue + " hour ago");
                                    else $(this).html(newValue + " hours ago");
                                }
                            });

                            $('#about').editable({
                                mode: 'inline',
                                type: 'wysiwyg',
                                name: 'about',

                                wysiwyg: {
                                    //css : {'max-width':'300px'}
                                },
                                success: function(response, newValue) {}
                            });



                            // *** editable avatar *** //
                            try { //ie8 throws some harmless exceptions, so let's catch'em

                                //first let's add a fake appendChild method for Image element for browsers that have a problem with this
                                //because editable plugin calls appendChild, and it causes errors on IE at unpredicted points
                                try {
                                    document.createElement('IMG').appendChild(document.createElement('B'));
                                } catch (e) {
                                    Image.prototype.appendChild = function(el) {}
                                }

                                var last_gritter
                                $('#avatar').editable({
                                    type: 'image',
                                    name: 'avatar',
                                    value: null,
                                    //onblur: 'ignore',  //don't reset or hide editable onblur?!
                                    image: {
                                        //specify ace file input plugin's options here
                                        btn_choose: 'Change Avatar',
                                        droppable: true,
                                        maxSize: 110000, //~100Kb

                                        //and a few extra ones here
                                        name: 'avatar', //put the field name here as well, will be used inside the custom plugin
                                        on_error: function(error_type) { //on_error function will be called when the selected file has a problem
                                            if (last_gritter) $.gritter.remove(last_gritter);
                                            if (error_type == 1) { //file format error
                                                last_gritter = $.gritter.add({
                                                    title: 'File is not an image!',
                                                    text: 'Please choose a jpg|gif|png image!',
                                                    class_name: 'gritter-error gritter-center'
                                                });
                                            } else if (error_type == 2) { //file size rror
                                                last_gritter = $.gritter.add({
                                                    title: 'File too big!',
                                                    text: 'Image size should not exceed 100Kb!',
                                                    class_name: 'gritter-error gritter-center'
                                                });
                                            } else { //other error
                                            }
                                        },
                                        on_success: function() {
                                            $.gritter.removeAll();
                                        }
                                    },
                                    url: function(params) {
                                        // ***UPDATE AVATAR HERE*** //
                                        //for a working upload example you can replace the contents of this function with 
                                        //examples/profile-avatar-update.js

                                        var deferred = new $.Deferred

                                        var value = $('#avatar').next().find('input[type=hidden]:eq(0)').val();
                                        if (!value || value.length == 0) {
                                            deferred.resolve();
                                            return deferred.promise();
                                        }


                                        //dummy upload
                                        setTimeout(function() {
                                            if ("FileReader" in window) {
                                                //for browsers that have a thumbnail of selected image
                                                var thumb = $('#avatar').next().find('img').data('thumb');
                                                if (thumb) $('#avatar').get(0).src = thumb;
                                            }

                                            deferred.resolve({
                                                'status': 'OK'
                                            });

                                            if (last_gritter) $.gritter.remove(last_gritter);
                                            last_gritter = $.gritter.add({
                                                title: 'Avatar Updated!',
                                                text: 'Uploading to server can be easily implemented. A working example is included with the template.',
                                                class_name: 'gritter-info gritter-center'
                                            });

                                        }, parseInt(Math.random() * 800 + 800))

                                        return deferred.promise();

                                        // ***END OF UPDATE AVATAR HERE*** //
                                    },

                                    success: function(response, newValue) {}
                                })
                            } catch (e) {}

                            /**
                            //let's display edit mode by default?
                            var blank_image = true;//somehow you determine if image is initially blank or not, or you just want to display file input at first
                            if(blank_image) {
                            	$('#avatar').editable('show').on('hidden', function(e, reason) {
                            		if(reason == 'onblur') {
                            			$('#avatar').editable('show');
                            			return;
                            		}
                            		$('#avatar').off('hidden');
                            	})
                            }
                            */

                            //another option is using modals
                            $('#avatar2').on('click', function() {
                                var modal =
                                    '<div class="modal fade">\
					  <div class="modal-dialog">\
					   <div class="modal-content">\
						<div class="modal-header">\
							<button type="button" class="close" data-dismiss="modal">&times;</button>\
							<h4 class="blue">Change Avatar</h4>\
						</div>\
						\
						<form class="no-margin">\
						 <div class="modal-body">\
							<div class="space-4"></div>\
							<div style="width:75%;margin-left:12%;"><input type="file" name="file-input" /></div>\
						 </div>\
						\
						 <div class="modal-footer center">\
							<button type="submit" class="btn btn-sm btn-success"><i class="ace-icon fa fa-check"></i> Submit</button>\
							<button type="button" class="btn btn-sm" data-dismiss="modal"><i class="ace-icon fa fa-times"></i> Cancel</button>\
						 </div>\
						</form>\
					  </div>\
					 </div>\
					</div>';


                                var modal = $(modal);
                                modal.modal("show").on("hidden", function() {
                                    modal.remove();
                                });

                                var working = false;

                                var form = modal.find('form:eq(0)');
                                var file = form.find('input[type=file]').eq(0);
                                file.ace_file_input({
                                    style: 'well',
                                    btn_choose: 'Click to choose new avatar',
                                    btn_change: null,
                                    no_icon: 'ace-icon fa fa-picture-o',
                                    thumbnail: 'small',
                                    before_remove: function() {
                                        //don't remove/reset files while being uploaded
                                        return !working;
                                    },
                                    allowExt: ['jpg', 'jpeg', 'png', 'gif'],
                                    allowMime: ['image/jpg', 'image/jpeg', 'image/png', 'image/gif']
                                });

                                form.on('submit', function() {
                                    if (!file.data('ace_input_files')) return false;

                                    file.ace_file_input('disable');
                                    form.find('button').attr('disabled', 'disabled');
                                    form.find('.modal-body').append("<div class='center'><i class='ace-icon fa fa-spinner fa-spin bigger-150 orange'></i></div>");

                                    var deferred = new $.Deferred;
                                    working = true;
                                    deferred.done(function() {
                                        form.find('button').removeAttr('disabled');
                                        form.find('input[type=file]').ace_file_input('enable');
                                        form.find('.modal-body > :last-child').remove();

                                        modal.modal("hide");

                                        var thumb = file.next().find('img').data('thumb');
                                        if (thumb) $('#avatar2').get(0).src = thumb;

                                        working = false;
                                    });


                                    setTimeout(function() {
                                        deferred.resolve();
                                    }, parseInt(Math.random() * 800 + 800));

                                    return false;
                                });

                            });



                            //////////////////////////////
                            $('#profile-feed-1').ace_scroll({
                                height: '250px',
                                mouseWheelLock: true,
                                alwaysVisible: true
                            });

                            $('a[ data-original-title]').tooltip();

                            $('.easy-pie-chart.percentage').each(function() {
                                var barColor = $(this).data('color') || '#555';
                                var trackColor = '#E2E2E2';
                                var size = parseInt($(this).data('size')) || 72;
                                $(this).easyPieChart({
                                    barColor: barColor,
                                    trackColor: trackColor,
                                    scaleColor: false,
                                    lineCap: 'butt',
                                    lineWidth: parseInt(size / 10),
                                    animate: false,
                                    size: size
                                }).css('color', barColor);
                            });

                            ///////////////////////////////////////////

                            //right & left position
                            //show the user info on right or left depending on its position
                            $('#user-profile-2 .memberdiv').on('mouseenter touchstart', function() {
                                var $this = $(this);
                                var $parent = $this.closest('.tab-pane');

                                var off1 = $parent.offset();
                                var w1 = $parent.width();

                                var off2 = $this.offset();
                                var w2 = $this.width();

                                var place = 'left';
                                if (parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2)) place = 'right';

                                $this.find('.popover').removeClass('right left').addClass(place);
                            }).on('click', function(e) {
                                e.preventDefault();
                            });


                            ///////////////////////////////////////////
                            $('#user-profile-3')
                                .find('input[type=file]').ace_file_input({
                                    style: 'well',
                                    btn_choose: 'Change avatar',
                                    btn_change: null,
                                    no_icon: 'ace-icon fa fa-picture-o',
                                    thumbnail: 'large',
                                    droppable: true,

                                    allowExt: ['jpg', 'jpeg', 'png', 'gif'],
                                    allowMime: ['image/jpg', 'image/jpeg', 'image/png', 'image/gif']
                                })
                                .end().find('button[type=reset]').on(ace.click_event, function() {
                                    $('#user-profile-3 input[type=file]').ace_file_input('reset_input');
                                })
                                .end().find('.date-picker').datepicker().next().on(ace.click_event, function() {
                                    $(this).prev().focus();
                                })
                            $('.input-mask-phone').mask('(999) 999-9999');

                            $('#user-profile-3').find('input[type=file]').ace_file_input('show_file_list', [{
                                type: 'image',
                                name: $('#avatar').attr('src')
                            }]);


                            ////////////////////
                            //change profile
                            $('[data-toggle="buttons"] .btn').on('click', function(e) {
                                var target = $(this).find('input[type=radio]');
                                var which = parseInt(target.val());
                                $('.user-profile').parent().addClass('hide');
                                $('#user-profile-' + which).parent().removeClass('hide');
                            });



                            /////////////////////////////////////
                            $(document).one('ajaxloadstart.page', function(e) {
                                //in ajax mode, remove remaining elements before leaving page
                                try {
                                    $('.editable').editable('destroy');
                                } catch (e) {}
                                $('[class*=select2]').remove();
                            });
                        });
                    </script>

                    <script src="/assets/api/editCategory.js"></script>
                    <script src="/assets/api/validateEditCate.js"></script>

                    <script src="/assets/api/logout.js"></script>
                    <script src="/assets/api/acesstoken.js"></script>
                    <script src="/assets/api/loginName.js"></script>
</body>

</html>